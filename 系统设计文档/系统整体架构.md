### 系统整体架构

本系统采用前后端分离的架构，包含三个主要部分：

1. **用户端前端 (user-frontend)**：基于 Vue.js 构建的单页面应用 (SPA)，供普通用户使用，提供浏览、搜索、互动等功能。
2. **管理端前端 (admin-frontend)**：基于 Vue.js 和 Element UI 构建的后台管理系统，供管理员使用，用于内容管理、用户管理、系统监控等。
3. **后端服务 (backend)**：基于 Spring Boot 构建的微服务，为两个前端提供 API 接口和业务逻辑处理，并与数据库、缓存(Redis)、消息队列（RabbitMQ）、对象存储服务（Minio）等中间件进行交互。

### 1. 用户端前端 (user-frontend) 架构

这是面向普通用户的Web应用，其核心技术栈为 `Vue 2`, `Vue Router`, `Vuex`, `Axios` 和 `Tailwind CSS`。

```
user-frontend/
├── public/
│   ├── favicon.ico             # 网站图标
│   └── index.html              # Vue 挂载入口HTML
├── src/
│   ├── App.vue                 # 根组件
│   ├── main.js                 # 应用入口文件（初始化Vue、路由、Vuex等）
│   ├── i18n.js                 # 国际化配置
│   ├── assets/                 # 静态资源 (CSS, SCSS)
│   │   ├── css/
│   │   └── auth-responsive.css
│   ├── components/             # 可复用的UI组件
│   │   ├── AIChatBot.vue       # AI聊天机器人组件
│   │   ├── MainMenu.vue        # 主导航菜单
│   │   ├── FloatingBlogButton.vue # 浮动博客发布按钮
│   │   ├── SlideCaptcha.vue    # 滑块验证码组件
│   │   └── TipTapEditor.vue    # 富文本编辑器
│   ├── router/                 # 路由配置 (Vue Router)
│   │   └── index.js            # 路由定义和守卫
│   ├── service/                # API服务层 (Axios封装)
│   │   ├── Request.js          # Axios实例和拦截器封装
│   │   ├── AccountServices.js  # 账户相关API
│   │   ├── CanteenServices.js  # 食堂相关API
│   │   ├── DishServices.js     # 菜品相关API
│   │   ├── BlogServices.js     # 博客相关API
│   │   └── ...                 # 其他业务API服务
│   ├── store/                  # 状态管理 (Vuex)
│   │   └── index.js            # Vuex Store 定义
│   └── views/                  # 页面级组件
│       ├── HomeView.vue        # 首页
│       ├── LoginView.vue       # 登录页
│       ├── RegisterView.vue    # 注册页
│       ├── CanteensList.vue    # 食堂列表页
│       ├── DishesList.vue      # 菜品列表页
│       ├── BlogDetail.vue      # 博客详情页
│       └── user/               # 用户个人中心相关页面
│           ├── UserProfile.vue # 个人资料页
│           └── ...
├── babel.config.js             # Babel 编译配置
├── vue.config.js               # Vue CLI 项目配置
└── package.json                # 项目依赖与脚本配置
```

### 2. 管理端前端 (admin-frontend) 架构

这是面向管理员的后台管理系统，技术栈核心为 `Vue 2`, `Vue Router`, `Vuex`, `Element UI` 和 `Axios`。

```
admin-frontend/
├── public/
│   └── index.html              # 页面入口
├── src/
│   ├── App.vue                 # 根组件
│   ├── main.js                 # 应用入口
│   ├── permission.js           # 权限控制逻辑
│   ├── api/                    # API请求定义
│   │   ├── user.js
│   │   └── role.js
│   ├── assets/                 # 静态资源
│   ├── components/             # 全局公共组件
│   │   ├── Breadcrumb/         # 面包屑导航
│   │   ├── Hamburger/          # 汉堡菜单
│   │   └── Pagination/         # 分页组件
│   ├── layout/                 # 后台布局组件
│   │   └── index.vue
│   ├── router/                 # 路由配置
│   │   └── index.js            # 动态路由和静态路由
│   ├── store/                  # 状态管理 (Vuex)
│   │   ├── index.js
│   │   └── modules/            # 按模块划分的Vuex Store
│   │       ├── app.js
│   │       ├── user.js
│   │       └── permission.js
│   ├── styles/                 # 全局样式
│   │   └── index.scss
│   ├── utils/                  # 工具函数
│   │   └── request.js          # Axios封装和请求拦截
│   └── views/                  # 页面级组件
│       ├── dashboard/          # 仪表盘
│       ├── content_mgr/        # 内容管理 (食堂、菜品等)
│       ├── community_mgr/      # 社区管理 (用户、博客、举报等)
│       ├── operation_mgr/      # 运营管理 (公告、优惠券等)
│       ├── system_mgr/         # 系统管理 (角色、权限等)
│       └── toolbox/            # 系统工具 (API文档、日志审计等)
├── vue.config.js               # Vue CLI 配置
└── package.json                # 依赖配置
```

### 3. 后端服务 (backend) 架构

后端采用 `Spring Boot` + `MyBatis-Plus` 为核心，结合 `Redis`, `RabbitMQ`, `MinIO` 等中间件，为前端提供稳定、高效的API服务。

#### 主业务后端（tddp-backend ）架构

```
tddp-backend/
└── src/
    ├── main/
    │   ├── java/xyz/tjucomments/tjufood/
    │   │   ├── TjuFoodApplication.java # Spring Boot 启动类
    │   │   ├── aop/                # AOP切面 (如：日志切面)
    │   │   ├── config/             # 配置类 (MVC, Mybatis, Redis, RabbitMQ等)
    │   │   ├── controller/         # 控制器层 (处理HTTP请求)
    │   │   │   ├── admin/          # 管理端API
    │   │   │   └── (user)/         # 用户端API
    │   │   ├── dto/                # 数据传输对象 (Data Transfer Object)
    │   │   ├── entity/             # 数据库实体类
    │   │   ├── interceptor/        # 拦截器 (如：登录验证、Token刷新)
    │   │   ├── mapper/             # MyBatis-Plus Mapper接口
    │   │   ├── service/            # 业务逻辑层接口
    │   │   │   └── impl/           # 业务逻辑层实现
    │   │   ├── task/               # 定时任务
    │   │   └── utils/              # 工具类 (JWT, Redis, 缓存客户端,防重放等)
    │   └── resources/
    │       ├── application.yaml    # Spring Boot 核心配置文件
    │       ├── mapper/             # MyBatis Mapper XML文件
    │       ├── static/             # 静态资源
    │       └── templates/          # 模板文件
    └── test/                     # 测试代码
```

#### AI服务后端（ai-backend ）架构

这是一个独立的、用于提供AI聊天机器人服务的后端。

```
ai-backend/
└── src/
    ├── main/
    │   ├── java/xyz/
    │   │   ├── AImodelApplication.java # Spring Boot 启动类
    │   │   ├── assistant/          # AI Agent 定义
    │   │   ├── bean/               # 请求/响应体
    │   │   ├── config/             # AI模型和嵌入配置
    │   │   ├── controller/         # 控制器
    │   │   ├── entity/             # 实体类 (如：聊天记录)
    │   │   ├── mapper/             # Mapper接口
    │   │   ├── service/            # 服务层
    │   │   └── store/              # 自定义存储 (如：MySQL聊天记录存储)
    │   └── resources/
    │       ├── application.properties # 配置文件
    │       └── *.txt               # Prompt模板
    └── test/                     # 测试代码
```